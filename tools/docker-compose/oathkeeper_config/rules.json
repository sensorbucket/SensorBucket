[
    {
        "id": "default",
        "upstream": {
            "url": "http://internalservice:3000/"
        },
        "match": {
            "url": "http://<127.0.0.1|localhost>:4466/dashboard",
            "methods": [
                "GET"
            ]
        },
        "authenticators": [
            {
                "handler": "cookie_session"
            }
        ],
        "authorizer": {
            "handler": "allow"
        },
        "mutators": [
            {
                "handler": "hydrator",
                "config": {
                    "api": {
                        "url": "http://auth-service:9090/hydrate"
                    }
                }
            },
            {
                "handler": "id_token",
                "config": {
                    "claims": "{\"org\": {{ print .Extra.org }}}"
                }
            }
        ]
    },
    {
        "id": "validate-api-keys-for-uplinks",
        "upstream": {
            "url": "http://internalservice:3000/"
        },
        "match": {
            "url": "http://<127.0.0.1|localhost>:4466/uplink",
            "methods": [
                "GET"
            ]
        },
        "authenticators": [
            {
                "handler": "bearer_token"
            }
        ],
        "authorizer": {
            "handler": "allow"
        },
        "mutators": [
            {
                "handler": "id_token"
            }
        ]
    }
]
